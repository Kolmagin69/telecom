## Telecom

## Cервис сообщений Pub-Sub
### Структура 
* Описание
* Модуль Publisher 
* Модуль Subscriber 
* Развертывание сервиса  
  * На локальной машине
  * В докер контейнере

### Описание

Cервис состоит из 2 приложений. Первое приложение Publisher отвечает за генерацию и отправку 
сообщений подписчику (subscriber) по HTTP протоколу. Subscriber разбирает сообщения и записывает его
в базу данных.

Протокол
Publisher и subscriber общаются между собой методом отправки JSON сообщений по следующему протоколу:

*	ID. Идентификатор отправленного сообщения. Автоинкрементится в каждом сообщении
*   Msisdn. Уникальный номер абонента. В рамках этого задания рандомно сгенерированное цифровое
 значние.
*   Action. Тип сообщения. Сообщения могут быть 2 типов – PURCHASE или SUBSCRIPTION. Значение 
выбирается рандомно 
при генерации сообщения.
*   Timestamp. UNIX timestamp.

### Пример сообщения:
```json
{
    "id": 1,
    "msisdn": 123456789,
    "action": "PURCHASE",
    "timestamp": 1589464122
}
```



### Publisher
Сервис Publisher генерирует собщения и отправляет их subscriber по протоколу HTTP в виду JSON файла
##### Пример сообщения:
```json
{
    "id": 1,
    "msisdn": 123456789,
    "action": "PURCHASE",
    "timestamp": 1589464122
}
```
После запуска приложений для начала сесси(генерация и отправка сообщений) необходимо отправить POST запрос:
```
POST /publisher/start HTTP/1.1
Host: localhost:8089
```
Сервис должен вернуть строку такого вида:
```
Start Threads : [ 1 - Thread-165, 2 - Thread-163, 3 - Thread-166, 4 - Thread-167, 5 - Thread-164 ]
```

### Subscriber 
*	Принимает отправленные запросы по HTTP протоколу.
*	Осуществляет парсинг сообщений.
*	Сохраняет полученные данные в БД
*	ACTION purchase должен сохраняться в таблицу PURCHASE, а ACTION  subscription в таблицу 
SUBSCRIPTION*

